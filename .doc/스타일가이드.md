## Yorkie Next Flow 스타일/색상 가이드

이 문서는 Next.js 기반 React Flow 공동 편집기에서 일관된 UI를 위해 사용하는 색상, 타이포그래피, 간격, 컴포넌트 스타일 가이드를 정의합니다. 실제 구현은 CSS 변수(디자인 토큰) 중심으로 하고, 라이트/다크 테마를 지원합니다.

### 디자인 토큰

- 컬러 팔레트(권장 값)
  - primary: `#6C5CE7` (메인 인터랙션)
  - accent: `#FF0072` (강조/하이라이트)
  - success: `#16A34A`
  - warning: `#F59E0B`
  - danger: `#EF4444`
  - gray-900: `#0F172A`, gray-700: `#334155`, gray-500: `#64748B`, gray-300: `#CBD5E1`, gray-100: `#F1F5F9`
- 표면/문자색(라이트)
  - background: `#FFFFFF`
  - surface: `#F8FAFC`
  - border: `#E2E8F0`
  - text-primary: `#0F172A`
  - text-secondary: `#475569`
- 표면/문자색(다크)
  - background: `#0B1020`
  - surface: `#121733`
  - border: `#1F2A44`
  - text-primary: `#E2E8F0`
  - text-secondary: `#94A3B8`
- 타이포그래피
  - font-family: `system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif`
  - font-size scale(px): 12, 14, 16, 18, 20, 24
  - line-height: 1.4 ~ 1.6
- 간격 scale(px)
  - spacing: 4, 8, 12, 16, 24, 32
- 모서리/그림자
  - radius: 8px(기본), 12px(카드)
  - shadow-soft: `0 1px 2px rgba(0,0,0,0.08), 0 4px 12px rgba(0,0,0,0.06)`

### CSS 변수 정의(테마)

앱 전역에 아래 변수를 선언하세요. 기본은 라이트 테마, `.theme-dark`로 다크 오버라이드.

```css
:root {
  /* brand */
  --color-primary: #6c5ce7;
  --color-accent: #ff0072;
  --color-success: #16a34a;
  --color-warning: #f59e0b;
  --color-danger: #ef4444;

  /* base light */
  --color-bg: #ffffff;
  --color-surface: #f8fafc;
  --color-border: #e2e8f0;
  --color-text: #0f172a;
  --color-text-muted: #475569;

  /* flow */
  --flow-grid-color: #c0c0c0; /* 배경 격자 */
  --flow-node-bg: #ffffff;
  --flow-node-border: #cbd5e1; /* gray-300 */
  --flow-node-selected: #6c5ce7;
  --flow-edge: #64748b; /* gray-500 */
  --flow-edge-selected: #6c5ce7;

  /* layout */
  --radius: 8px;
  --radius-lg: 12px;
  --shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.06);
}

.theme-dark {
  --color-bg: #0b1020;
  --color-surface: #121733;
  --color-border: #1f2a44;
  --color-text: #e2e8f0;
  --color-text-muted: #94a3b8;

  --flow-grid-color: #465175;
  --flow-node-bg: #0e1430;
  --flow-node-border: #2a3a66;
  --flow-node-selected: #a79bff;
  --flow-edge: #7b8ab2;
  --flow-edge-selected: #a79bff;
}
```

### 전역 베이스 스타일(발췌)

글로벌 스타일(예: `src/app/globals.css`)에 다음을 추가하는 것을 권장합니다.

```css
html,
body {
  background: var(--color-bg);
  color: var(--color-text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial,
    sans-serif;
}

button {
  border-radius: var(--radius);
}

/* 포커스 가시성 */
:where(button, a, input, [role="button"]) {
  outline: none;
}

:where(button, a, input, [role="button"]):focus-visible {
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-primary) 35%, transparent);
}
```

### React Flow 스타일 가이드

`@xyflow/react/dist/style.css`를 import한 뒤, 아래 커스터마이징을 추가하세요.

```css
/* 캔버스 */
.react-flow__pane,
.react-flow__viewport {
  background: var(--color-surface);
}

/* 배경 그리드 색상은 컴포넌트에서 prop으로 지정하거나 아래 변수를 기준으로 커스텀 */
.react-flow__background rect {
  stroke: var(--flow-grid-color);
}

/* 노드 */
.react-flow__node {
  background: var(--flow-node-bg);
  border: 1px solid var(--flow-node-border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
  color: var(--color-text);
}

.react-flow__node.selected,
.react-flow__node:focus-visible {
  border-color: var(--flow-node-selected);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--flow-node-selected) 35%, transparent);
}

/* 엣지 */
.react-flow__edge-path {
  stroke: var(--flow-edge);
  stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path,
.react-flow__edge:focus-visible .react-flow__edge-path {
  stroke: var(--flow-edge-selected);
  stroke-width: 2.5;
}

/* 엣지 라벨 */
.react-flow__edge-textbg {
  fill: var(--color-surface);
}
.react-flow__edge-text {
  fill: var(--color-text);
}
```

### Button 스타일 가이드(Tailwind)

Add/Remove 등 다양한 버튼으로 확장 가능한 공통 스타일을 Tailwind로 정의합니다. 전역 CSS는 토큰/테마만 유지하고, 버튼 표현은 Tailwind 유틸리티로 작성하세요.

```tsx
// 공통 버튼 클래스
const baseBtn =
  "inline-flex items-center justify-center rounded-[var(--radius)] text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color-mix(in_oklab,var(--color-primary)_35%,transparent)] disabled:opacity-50 disabled:pointer-events-none";

// variants
const btnPrimary =
  baseBtn +
  " bg-[var(--color-primary)] text-white shadow-[var(--shadow-soft)] border border-[color-mix(in_oklab,var(--color-primary)_60%,black_10%)] hover:bg-[color-mix(in_oklab,var(--color-primary)_92%,white_8%)]";
const btnSubtle =
  baseBtn +
  " bg-[var(--color-surface)] text-[var(--color-text)] border border-[var(--color-border)] hover:bg-[color-mix(in_oklab,var(--color-surface)_92%,white_8%)]";
const btnDanger =
  baseBtn +
  " bg-[var(--color-danger)] text-white hover:bg-[color-mix(in_oklab,var(--color-danger)_92%,white_8%)]";

// 사용 예시
export function Toolbar() {
  return (
    <div className="fixed top-4 right-4 flex gap-2">
      <button className={`${btnPrimary} px-3 py-2`}>Add</button>
      <button className={`${btnSubtle} px-3 py-2`}>Remove</button>
    </div>
  );
}
```

권장 사이즈

- sm: `px-2 py-1.5 text-sm`
- md: `px-3 py-2 text-sm`
- lg: `px-4 py-2.5 text-base`

아이콘 포함 시 `gap-1.5`를 추가하세요.

### 컴포넌트 권장 규칙

- 노드
  - 기본 패딩: 12~16px, 최소 폭: 120px
  - 제목/라벨은 14~16px, 보조 텍스트는 12~14px
  - 상태에 따른 테두리/그림자로 피드백 제공(선택/포커스/호버)
- 엣지
  - 기본 색 `--flow-edge`, 선택 시 `--flow-edge-selected`
  - 라벨 배경은 표면색과 동일하게 유지
- 접근성
  - 인터랙션 색상 대비(AA 등급) 유지 권장
  - 키보드 포커스 링(3px) 유지

### 테마 적용 방법

- 라이트(기본): 아무 클래스 없이 동작
- 다크: 루트에 `.theme-dark` 클래스 추가

```html
<html class="theme-dark">
  <!-- ... -->
</html>
```

### 적용 체크리스트

- [ ] `@xyflow/react/dist/style.css` 임포트
- [ ] 전역 CSS 변수 선언 및 글로벌 베이스 스타일 적용
- [ ] React Flow 노드/엣지/배경 커스터마이징 추가
- [ ] Tailwind 공통 button 유틸리티 클래스 적용
- [ ] 라이트/다크 테마 스위칭 확인
